#!/bin/bash

TARGET_DIR=$(dirname $0)

rm -rf ${TARGET_DIR}/build
mkdir ${TARGET_DIR}/build
cd ${TARGET_DIR}/build

../configure

case $@ in

	"dbg")
		make -j9;
		bash -c "gdb ./lunkwill"
	;;
	"mem")
		make -j9;
		bash -c "valgrind --leak-check=full --track-origins=yes --show-reachable=yes --show-possibly-lost=yes --trace-children=yes --time-stamp=yes ./lunkwill"
	;;
	"run")
		make -j9;
		bash -c "./lunkwill"
	;;
	"doc")
		cd ..
		doxygen scripts/doxyfile;
	;;

	"clang")
		CC=clang make -j9
		bash
	;;
	
	"gcc")
		make -j9;
		bash
	;;
	
	*)
		echo $@
		bash
esac

rm -rf ${TARGET_DIR}/build
